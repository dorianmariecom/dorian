#!/usr/bin/env ruby
# frozen_string_literal: true

require "dorian/arguments"

parsed = Dorian::Arguments.parse(
  colorize: { aliases: [:color, :c], default: true },
  fast: { alias: :f },
  input: { type: :string, default: :raw, alias: :i },
  output: { type: :string, default: :raw, alias: :o },
  parallel: { alias: :p },
  rails: { alias: :r },
  stderr: { alias: :err },
  stdout: { alias: :out },
  write: { alias: :w },
  deep: :boolean,
  debug: { alias: :d },
  progress: :boolean,
  progress_format: { alias: :pf },
  version: { alias: :v },
  help: { alias: :h }
)

abort parsed.help if parsed.options.help

if parsed.options.version
  abort File.read(File.expand_path("../VERSION", __dir__))
end
